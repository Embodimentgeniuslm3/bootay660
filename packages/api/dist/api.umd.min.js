!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("axios"),require("http-status-codes"),require("axios/lib/core/buildFullPath")):"function"==typeof define&&define.amd?define(["exports","axios","http-status-codes","axios/lib/core/buildFullPath"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).TailorApi={},t.axios,t.httpStatusCodes,t.buildFullPath)}(this,(function(t,e,r,n){"use strict";function o(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var u=o(e),i=o(n);function s(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},u=Object.keys(t);for(n=0;n<u.length;n++)r=u[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(n=0;n<u.length;n++)r=u[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}function a(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var r=[],n=!0,o=!1,u=void 0;try{for(var i,s=t[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!e||r.length!==e);n=!0);}catch(t){o=!0,u=t}finally{try{n||null==s.return||s.return()}finally{if(o)throw u}}return r}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}e.Axios.prototype.submitForm=function(t,e,r){var n=i.default(this.defaults.baseURL,t);return Promise.resolve(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,n=document.createElement("form");Object.assign(n,{method:"POST",target:"blank",action:t},r),Object.entries(e).forEach((function(t){var e=a(t,2),r=e[0],o=e[1],u=document.createElement("input");Object.assign(u,{name:r},o),n.appendChild(u)})),document.body.appendChild(n),n.submit(),n.remove()}(n,e,r))};var f={baseURL:process.env.API_PATH,withCredentials:!0,headers:{"Content-Type":"application/json"}},p=u.default.create(f);Object.defineProperty(p,"base",{get:function(){return this.base_||(this.base_=u.default.create(f)),this.base_}});p.interceptors.response.use((function(t){return t}),(function(t){if(function(t){var e;return[r.FORBIDDEN,r.UNAUTHORIZED].includes(null===(e=t.response)||void 0===e?void 0:e.status)}(t))return window.location.reload();throw t}));var l=function(t){return"/repositories/".concat(t,"/activities")};var d={createPreview:function(t,e){return p.get("".concat(l(t),"/").concat(e,"/preview")).then((function(t){return t.data.location}))},getActivities:function(t,e){return p.get(l(t),{params:e}).then((function(t){return t.data.data}))}},h=function(t){return"/repositories/".concat(t,"/assets")};var v={getUrl:function(t,e){var r={key:e};return p.get(h(t),{params:r}).then((function(t){return t.data.url}))},upload:function(t,e){return p.post(h(t),e).then((function(t){return t.data}))}},g="/users/login",m="/users/logout",b="/users/forgot-password",y="/users/reset-password",x="/users/me",w="/users/me/change-password";var I={login:function(t){return p.base.post(g,t)},logout:function(){return p.get(m)},forgotPassword:function(t){return p.post(b,{email:t})},resetPassword:function(t,e){return p.post(y,{token:t,password:e})},getUserInfo:function(){return p.base.get(x)},updateUserInfo:function(t){return p.patch(x,t)},changePassword:function(t,e){return p.post(w,{currentPassword:t,newPassword:e})}};function O(t){return t.data.data}var P={repository:function(t){return"/repositories/".concat(t)},root:function(t){return"".concat(P.repository(t),"/content-elements")},resource:function(t,e){return"".concat(P.root(t),"/").concat(e)}};var j={fetch:function(t){var e=t.repositoryId,r=s(t,["repositoryId"]);return p.get(P.root(e),{params:r}).then(O)},patch:function(t,e){var r=t.repositoryId,n=t.id;return p.patch(P.resource(r,n),e)}},A={root:function(t){return"/repositories/".concat(t,"/feed")},subscribe:function(t){return"".concat(A.root(t),"/subscribe")}};var T={urls:A,fetch:function(t){return p.get(A.root(t)).then(O)},start:function(t){return p.post(A.root(t.repositoryId),{context:t})},end:function(t){return p.delete(A.root(t.repositoryId),{data:{context:t}})}},S={root:"/repositories",import:function(){return"".concat(S.root,"/import")},resource:function(t){return"".concat(S.root,"/").concat(t)},publish:function(t){return"".concat(S.resource(t),"/publish")},exportInit:function(t){return"".concat(S.resource(t),"/export/setup")},export:function(t,e){return"".concat(S.resource(t),"/export/").concat(e)},users:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return"".concat(S.resource(t),"/users/").concat(e)},tags:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return"".concat(S.resource(t),"/tags/").concat(e)}};var U={get:function(t,e){return p.get(S.resource(t),{params:e}).then(O)},getRepositories:function(t){return p.get(S.root,{params:t}).then(O)},save:function(t){return p.post(S.root,t).then(O)},getUsers:function(t,e){return p.get(S.users(t),{params:e}).then(O)},upsertUser:function(t,e){return p.post(S.users(t),e).then((function(t){return O(t).user}))},removeUser:function(t,e){return p.delete(S.users(t,e)).then((function(t){return t.data}))},publishRepositoryMeta:function(t){return p.post(S.publish(t)).then((function(t){return t.data}))},addTag:function(t){var e=t.name,r=t.repositoryId;return p.post(S.tags(r),{repositoryId:r,name:e}).then(O)},removeTag:function(t){var e=t.repositoryId,r=t.tagId;return p.delete(S.tags(e,r)).then(O)},initiateExportJob:function(t){return p.get(S.exportInit(t)).then(O)},exportRepository:function(t,e,r){return p.submitForm(S.export(t,e),r)},importRepository:function(t,e){return p.post(S.import(),t,e)}},E={root:function(t){return"/repositories/".concat(t,"/revisions")},timeTravel:function(t){return"/repositories/".concat(t,"/revisions/time-travel")},resource:function(t,e){return"".concat(E.root(t),"/").concat(e)}};var R={fetch:function(t,e){return p.get(E.root(t),{params:e}).then(O)},getStateAtMoment:function(t,e){return p.get(E.timeTravel(t),{params:e}).then(O)},get:function(t,e,r){return p.get(E.resource(t,e),{params:r}).then((function(t){return t.data}))}},C="/tags";var F={fetch:function(t){return p.get(C,{params:t}).then(O)}};var _={fetch:function(t){return p.get("/users",{params:t}).then(O)},upsert:function(t){return p.post("/users",t).then(O)},remove:function(t){var e=t.id;return p.delete("/users/".concat(e))},reinvite:function(t){var e=t.id;return p.post("/users/".concat(e,"/reinvite"))}};t.activity=d,t.asset=v,t.auth=I,t.client=p,t.contentElement=j,t.extractData=O,t.feed=T,t.repository=U,t.revision=R,t.tag=F,t.user=_,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=api.umd.min.js.map
